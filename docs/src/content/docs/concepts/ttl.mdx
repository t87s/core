---
title: TTL
description: How long your cache stays fresh
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

TTL stands for "Time To Live", which sounds like a medical prognosis but is actually just how long your cached data stays fresh before it expires.

<Tabs>
  <TabItem label="TypeScript">
    ```typescript
    import { QueryCache, at, wild, MemoryAdapter } from '@t87s/core';

    const cache = QueryCache({
      schema: at('users', () => wild),
      adapter: new MemoryAdapter(),
      queries: (tags) => ({
        getUser: (id: string) => ({
          tags: [tags.users(id)],
          ttl: '10m', // Cache this for 10 minutes
          fn: () => db.users.findById(id),
        }),
      }),
    });
    ```
  </TabItem>
  <TabItem label="Python">
    ```python
    from t87s import QueryCache, TagSchema, Wild, cached
    from t87s.adapters import AsyncMemoryAdapter

    class Tags(TagSchema):
        users: Wild[TagSchema]

    class Cache(QueryCache[Tags]):
        @cached(Tags.users(), ttl="10m")  # Cache this for 10 minutes
        async def get_user(self, id: str):
            return await db.users.find_by_id(id)

    cache = Cache(adapter=AsyncMemoryAdapter())
    ```
  </TabItem>
</Tabs>

## Human-friendly durations

Nobody wants to do math. We support strings like:

- `'30s'` - 30 seconds
- `'5m'` - 5 minutes
- `'2h'` - 2 hours
- `'1d'` - 1 day

Or if you like mashing the 0 key, milliseconds work too: `ttl: 600000`.

## Choosing a TTL

There's no magic number. Short TTLs work well for real-time dashboards or user sessions, whereas longer ones make sense for static content or configuration data that rarely changes.

Tuning your TTL is more of an art than a science. And, like all great art, it is a completely mercantile and transactional endeavor. Not unlike our [SaaS offering](/cloud/), which auto-tunes your TTL (amongst other things) so that your cache purrs like a Formula 1 engine.

## TTL vs Invalidation

In a perfect world, you'd invalidate exactly when data changes and never need TTL at all. But we don't live in a perfect world. Well, actually, I do, but you don't. You or someone on your team will invariably forget to invalidate the cache.

TTL is your safety net. Even if everything else goes belly up, your cache won't serve stale data forever.
