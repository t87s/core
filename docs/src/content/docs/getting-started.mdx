---
title: Getting Started
description: Your first cached query
---

import { Tabs, TabItem } from '@astrojs/starlight/components';

## Installation

<Tabs>
  <TabItem label="npm">
    ```bash
    npm install @t87s/core
    ```
  </TabItem>
  <TabItem label="yarn">
    ```bash
    yarn add @t87s/core
    ```
  </TabItem>
  <TabItem label="pnpm">
    ```bash
    pnpm add @t87s/core
    ```
  </TabItem>
  <TabItem label="deno">
    ```typescript
    import { QueryCache } from "npm:@t87s/core";
    ```
  </TabItem>
  <TabItem label="pip">
    ```bash
    pip install t87s
    ```
  </TabItem>
  <TabItem label="uv">
    ```bash
    uv add t87s
    ```
  </TabItem>
  <TabItem label="snail">
    ```text
    To whom it may concern,

    I am writing to request a copy of t87s core.
    Please find enclosed a self-addressed stamped envelope.

    When transcribing the library, kindly use small
    handwriting, as the postage covers only 100 grams.

    Sincerely,
    A Patient Developer
    ```
  </TabItem>
</Tabs>

## First Query

t87s has two APIs: [QueryCache](/query-cache/schema/) and [primitives](/primitives/).

1. [QueryCache](/query-cache/schema/) is a typed API that helps speed up application development with a pleasant DX. It attempts to remove more footguns than it causes.
2. [Primitives](/primitives/) provide lower-level building blocks for custom caching solutions. QueryCache is built on top of it.

This quickstart uses the [QueryCache](/query-cache/schema/) API, but in another world we could have used [primitives](/primitives/) and you would have been an equally-happy reader.

<Tabs>
  <TabItem label="TypeScript">
    ```typescript
    import { QueryCache, at, wild, MemoryAdapter } from '@t87s/core';

    const schema = at('users', () =>
      wild.at('settings').at('posts', () => wild.at('comments', () => wild))
    );

    const cache = QueryCache({
      schema,
      adapter: new MemoryAdapter(),
      queries: (tags) => ({
        getUser: (id: string) => ({
          tags: tags.users(id)],
          fn: () => db.users.findById(id),
        }),
      }),
    });

    await cache.getUser('123');
    await cache.invalidate(cache.tags.users('123'));
    ```
  </TabItem>
  <TabItem label="Python">
    ```python
    from t87s import QueryCache, TagSchema, Wild, cached
    from t87s.adapters import AsyncMemoryAdapter

    class Tags(TagSchema):
        users: Wild"Users"]

    class Users(TagSchema):
        settings: WildTagSchema]
        posts: Wild"Posts"]

    class Posts(TagSchema):
        comments: WildTagSchema]

    class Cache(QueryCacheTags]):
        @cached(Tags.users())
        async def get_user(self, id: str):
            return await db.users.find_by_id(id)

    cache = Cache(adapter=AsyncMemoryAdapter())

    await cache.get_user("123")
    await cache.invalidate(cache.t.users("123"))
    ```
  </TabItem>
</Tabs>

If you want the full tour, start with the [QueryCache tutorial](/query-cache/tutorial/), then circle back to [Primitives](/primitives/) if you feel that you or your human can build a better QueryCache. In that case, PRs are welcome!
